<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ===================================================================
         1) Vista de formulario (hr.view_employee_form)
         =================================================================== -->
    <record id="view_employee_form_inherit_hmx" model="ir.ui.view">
        <field name="name">hr.employee.form.hmx</field>
        <field name="model">hr.employee</field>
        <!-- Heredamos de la vista original de empleado en Odoo 17 -->
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <!-- Insertamos un grupo adicional dentro de <sheet> -->
            <xpath expr="//sheet" position="inside">
                <group string="Datos adicionales HMX">
                    <field name="x_numero_nomina"/>
                    <field name="x_planta"/>
                    <field name="x_ubicacion"/>
                    <field name="x_fecha_ingreso"/>
                    <field name="x_antiguedad"/>
                    <field name="x_fecha_baja"/>
                </group>
            </xpath>
        </field>
    </record>


    <!-- ===================================================================
         2) Vista de lista (hr.view_employee_tree)
         =================================================================== -->
    <record id="view_employee_tree_inherit_hmx" model="ir.ui.view">
        <field name="name">hr.employee.tree.hmx</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_tree"/>
        <field name="arch" type="xml">

            <!-- 1) Insertar x_numero_nomina antes del campo name,
                   para que sea la primera columna (ordenable). -->
            <xpath expr="//tree/field[@name='name']" position="before">
                <field name="x_numero_nomina"
                       sortable="True"
                       widget="badge"
                       decoration-info="True"
                       />
            </xpath>

            <!-- 2) Insertar el resto de campos después del name,
                   en el orden deseado, con decoraciones de color. -->
            <xpath expr="//tree/field[@name='name']" position="after">

                <!-- Planta: distintos colores para cada opción -->
              <field name="x_planta"
                    widget="badge"
                    decoration-danger="x_planta == 'Planta 1'"
                    decoration-warning="x_planta == 'Planta 2'"
                    decoration-success="x_planta == 'Planta 3'"
                    decoration-muted="x_planta in ('Planta 4','Planta 5')"
                    decoration-info="x_planta == 'Planta 6'"
                    decoration-bf="x_planta == 'Planta 7'"
                />


                <!-- Ubicación: un color fijo (info) -->
                <field name="x_ubicacion"
                       widget="badge"
                       decoration-info="True"
                       />

                <!-- Fecha de Ingreso: un color fijo (success) -->
                <field name="x_fecha_ingreso"
                       widget="badge"
                       decoration-success="True"
                       />

                <!-- Antigüedad: un color fijo (warning) -->
                <field name="x_antiguedad"
                       widget="badge"
                       decoration-warning="True"
                       />

                <!-- Fecha de Baja: un color fijo (danger) -->
                <field name="x_fecha_baja"
                       widget="badge"
                       decoration-danger="True"
                       />
            </xpath>

        </field>
    </record>

</odoo>
