<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Herencia de la vista de formulario de Empleado -->
    <record id="view_employee_form_inherit_hmx" model="ir.ui.view">
        <field name="name">hr.employee.form.hmx</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <!-- Usamos //sheet en vez de buscar la clase 'o_hr_employee_form_main' -->
            <xpath expr="//sheet" position="inside">
                <group string="Datos adicionales HMX">
                    <field name="x_numero_nomina"/>
                    <field name="x_planta"/>
                    <field name="x_ubicacion"/>
                    <field name="x_fecha_ingreso"/>
                    <field name="x_antiguedad"/>
                    <field name="x_fecha_baja"/>
                </group>
            </xpath>
        </field>
    </record>

    <!-- Herencia de la vista de lista de Empleado -->
    <record id="view_employee_tree_inherit_hmx" model="ir.ui.view">
        <field name="name">hr.employee.tree.hmx</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_tree"/>
        <field name="arch" type="xml">

            <!-- x_numero_nomina como primera columna y como campo ordenable -->
            <xpath expr="//field[@name='name']" position="before">
                <field name="x_numero_nomina" 
                       sortable="True"
                       widget="badge"
                       decoration-info="True"
                />
            </xpath>

            <!-- Reafirmar la visibilidad del campo name (segundo) -->
            <xpath expr="//field[@name='name']" position="attributes">
                <attribute name="invisible">False</attribute>
            </xpath>

            <!-- Los demÃ¡s campos personalizados -->
            <xpath expr="//field[@name='name']" position="after">
                <field name="x_planta"
                       widget="badge"
                       decoration-danger="x_planta == 'Planta 1'"
                       decoration-warning="x_planta == 'Planta 2'"
                       decoration-success="x_planta == 'Planta 3'"
                       decoration-primary="x_planta == 'Planta 4'"
                       decoration-info="x_planta == 'Planta 5'"
                       decoration-muted="x_planta == 'Planta 6'"
                       decoration-bf="x_planta == 'Planta 7'"
                />
                <field name="x_ubicacion"
                       widget="badge"
                       decoration-info="True"
                />
                <field name="x_fecha_ingreso"
                       widget="badge"
                       decoration-success="True"
                />
                <field name="x_antiguedad"
                       widget="badge"
                       decoration-warning="True"
                />
                <field name="x_fecha_baja"
                       widget="badge"
                       decoration-danger="True"
                />
            </xpath>

        </field>
    </record>
</odoo>
